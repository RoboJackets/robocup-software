machine:
  services:
    - docker

notify:
  webhooks:
    - url: https://webhooks.gitter.im/e/adc1cd90ef1589404742

dependencies:
  pre:
      # Login to docker
    - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
    - ./util/docker/baseimage/buildbaseimage.sh
      # Actually the test step, but we want to cache it so it can go here.
    - ./util/docker/circle/buildcircle.sh
  cache_directories:
    - ~/.ccache

test:
  override:
    - sh -c true

deployment:
  hub:
    branch: master
    commands:
      - ./util/docker/circle/pushcircle.sh

