Import('*')

e = env.Clone()

#bullet_path=Dir('#/build/lib/physx')
#bullet_libpath = physx_path.Dir('lib')

# Link with Bullet 
#e.Append(LIBPATH=bullet_libpath)
#e.Append(LIBS=['NxCooking', 'PhysXCore', 'PhysXLoader'])
e.Append(CPPPATH=['#/bullet/src', '#/bullet/Demos/OpenGL'])

# Find uic output
e.Append(CPPPATH='ui')

# Add bullet libraries
#e.Append(LIBS=[
#	'OpenGLSupport',  
#	'BulletDynamics', 
#	'BulletCollision', 
#	'LinearMath'])

# Add all bullet libraries at once
e.Append(LIBS=['bullet'])

# add opengl libraries
e.Append(LIBS=[    
	'glut', 
	'GL', 
	'GLU'])

p1 = e.Program('simulator', [
	'main.cpp',
	'SimControl.cpp',
	'Config.cpp',
	'Physics/Env.cpp',
	'Physics/Entity.cpp',
	'Physics/Ball.cpp',
	'Physics/Field.cpp',
	'Physics/Robot.cpp'])

uics = e.Uic4([
	'ui/SimControl.ui'
])
e.Depends(p1, uics)

# Simulator executable
Default(e.Install(exec_dir, p1))
Help('simulator: Provides simulation of SSL robots, using Bullet Physics\n')

# add demos for testing
p2 = e.Program('vehicle_demo', ['vehicle_demo.cpp', 'VehicleDemo.cpp'])
Default(e.Install(exec_dir, p2))
