#!/bin/bash -e

# Become root
if [ $UID -ne 0 ]; then
	echo "-- Becoming root"
	exec sudo $0
fi

MACH=$(uname -m)
unset DPKG_FLAGS

BASE=$(readlink -f $(dirname $0)/..)

echo "-- Installing udev rules"
cp -f $BASE/util/robocup.rules /etc/udev/rules.d/

echo "-- Installing normal packages"
apt-get install build-essential qt4-dev-tools libboost-dev \
	libusb-1.0-0-dev libgtkmm-2.4-dev protobuf-compiler libprotobuf-dev \
	libpcap-dev scons graphviz binutils-dev libqt4-opengl-dev python-pip python-dev \
	avr-libc libgmp3-dev libmpfr-dev libmpc-dev texinfo curl texinfo dfu-programmer avrdude \
	libreadline-dev libgtest-dev autoconf libtool autopoint flex bison openocd \
  iverilog gtkwave picocom python-numpy python-matplotlib python-usb doxygen 

echo "-- Removing excessively old packages: if this causes a problem, kill it here and fix it yourself"
apt-get remove python-git

echo "-- Installing python packages"
pip install GitPython

